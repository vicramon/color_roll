%header
  .title Moonlight Sonata
  .author by Ludwig van Beethoven

.color_legend
  = image_tag "color_legend.png"

.roll
  - # TODO smartly determine number of measures
  - (1..70).each do |i|
    .measure{ style: "left: #{240*i}px;" }
  - note_number = 109
  = render "keys/key_line", key: :c, note_number: note_number -= 1
  = render "keys/key_line", key: :b, note_number: note_number -= 1
  = render "keys/key_line", key: :black, note_number: note_number -= 1
  = render "keys/key_line", key: :a, note_number: note_number -= 1
  - 7.times do
    = render "keys/key_line", key: :black, note_number: note_number -= 1
    = render "keys/key_line", key: :g, note_number: note_number -= 1
    = render "keys/key_line", key: :black, note_number: note_number -= 1
    = render "keys/key_line", key: :f, note_number: note_number -= 1
    = render "keys/key_line", key: :e, note_number: note_number -= 1
    = render "keys/key_line", key: :black, note_number: note_number -= 1
    = render "keys/key_line", key: :d, note_number: note_number -= 1
    = render "keys/key_line", key: :black, note_number: note_number -= 1
    = render "keys/key_line", key: :c, note_number: note_number -= 1
    = render "keys/key_line", key: :b, note_number: note_number -= 1
    = render "keys/key_line", key: :black, note_number: note_number -= 1
    = render "keys/key_line", key: :a, note_number: note_number -= 1

:coffee
  width = $(".roll").get(0).scrollWidth
  $(".key").css("width", width + "px")
